"use client";

import Link from "next/link";
import Image from "next/image";
import { useState } from "react";

export default function Header() {
  const [isMenuOpen, setIsMenuOpen] = useState(false);

  return (
    <header className="sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
      <div className="container mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex h-16 items-center justify-between">
          {/* Logo */}
          <div className="flex items-center">
            <Link href="/" className="flex items-center space-x-2">
              <div className="relative w-8 h-8">
                <svg>
                  <path
                    fill="white"
                    d="M54.226 25.968V4.104h4.227v21.864zm2.73 0v-3.445h13.678v3.445zm0-9.507v-3.18h12.047v3.18zm0-8.912V4.104h13.611V7.55zm16.209 18.42 7.488-10.933-7.388-10.932h4.925l5.26 8.58h.165l5.292-8.58h4.959l-7.422 10.833 7.621 11.031H89.14l-5.525-8.745h-.166l-5.358 8.745zm22.424 0 7.588-21.865h6.158l7.588 21.864h-4.593L106.505 7.45h-.465l-5.891 18.518zm4.027-4.506v-2.948h13.846v2.948zm29.528 4.936q-2.496 0-4.46-.696-1.963-.729-3.328-2.12-1.365-1.425-2.096-3.511-.733-2.088-.733-4.77 0-2.783.733-4.937.764-2.153 2.13-3.644a8.64 8.64 0 0 1 3.261-2.286q1.898-.762 4.227-.762 1.797 0 3.328.464t2.629 1.392a6.3 6.3 0 0 1 1.764 2.186q.632 1.26.666 2.882l-3.928 1.027q.034-1.491-.632-2.484a4.17 4.17 0 0 0-1.73-1.491 5.1 5.1 0 0 0-2.23-.497q-1.065 0-2.13.43-1.032.431-1.864 1.359t-1.331 2.451q-.5 1.491-.499 3.677 0 2.783.798 4.506.831 1.723 2.263 2.55 1.465.796 3.295.796 1.864 0 2.962-.73a4.4 4.4 0 0 0 1.598-1.987 8.4 8.4 0 0 0 .565-2.716l3.695.63q-.034 1.722-.533 3.246a6.96 6.96 0 0 1-1.564 2.65q-1.032 1.125-2.729 1.756-1.698.63-4.127.63m17.17-.43V4.103h4.227v21.864zm-6.524-18.32V4.104h17.307V7.65zm20.586 18.32V4.103h4.194v21.864zm.965 0V22.39h12.847v3.577zm18.571 0v-6.891l-7.954-14.974h4.992l4.992 11.098h.167l4.959-11.098h4.959l-7.888 14.908v6.956zm21.08 0 7.588-21.865h6.157l7.588 21.864h-4.592L211.908 7.45h-.465l-5.892 18.518zm4.027-4.506v-2.948h13.845v2.948zm20.588 4.505V4.104h4.26v21.864zM57.55 39.592a6 6 0 0 1-1.47-.163 3.3 3.3 0 0 1-1.106-.463 2.4 2.4 0 0 1-.717-.8 2.8 2.8 0 0 1-.289-1.114l1.584-.513q.025.564.276.939.264.375.742.55.477.175 1.068.175.565 0 .955-.137.39-.138.59-.363a.78.78 0 0 0 .202-.513.64.64 0 0 0-.252-.525q-.251-.2-.69-.338-.428-.138-.981-.263-.615-.138-1.22-.313a5.2 5.2 0 0 1-1.08-.45 2.25 2.25 0 0 1-.767-.713q-.276-.438-.276-1.1 0-.764.377-1.314.39-.564 1.131-.876.742-.313 1.785-.313 1.055 0 1.797.313.754.3 1.169.863.414.55.452 1.314l-1.634.45q0-.389-.125-.675a1.26 1.26 0 0 0-.352-.476 1.5 1.5 0 0 0-.566-.3 2.6 2.6 0 0 0-.754-.1q-.49 0-.855.125a1.3 1.3 0 0 0-.54.338.76.76 0 0 0-.176.5q0 .338.277.563.289.213.754.35.477.138 1.043.263.54.112 1.093.288.566.162 1.044.438.49.263.779.725.3.45.301 1.138 0 .75-.402 1.314-.402.563-1.206.876-.792.3-1.961.3m22.024 0q-.905 0-1.622-.275a3.5 3.5 0 0 1-1.231-.826 3.8 3.8 0 0 1-.78-1.339q-.263-.8-.264-1.826 0-1.463.516-2.414.515-.963 1.407-1.439.905-.488 2.037-.488.88 0 1.595.288.716.275 1.22.826.515.538.791 1.35.277.8.277 1.84 0 1.063-.277 1.863a3.6 3.6 0 0 1-.804 1.352q-.515.538-1.244.813a4.6 4.6 0 0 1-1.621.275m.05-1.439q.666 0 1.118-.325.453-.326.691-.938.24-.614.24-1.501 0-.927-.252-1.577-.24-.65-.704-.988-.465-.35-1.13-.35-.655 0-1.12.338-.452.324-.703.95-.24.625-.239 1.551 0 .675.138 1.214.15.525.415.888.264.363.653.55.39.188.893.188m18.873 1.264V31.16h1.81v8.257zm.377 0v-1.514h4.939v1.514zm22.963.175q-.766 0-1.37-.163a3.4 3.4 0 0 1-1.03-.438 3 3 0 0 1-.742-.713 3.3 3.3 0 0 1-.44-.95 4.5 4.5 0 0 1-.138-1.151V31.16h1.822v4.954q0 .638.201 1.064.213.413.629.613.414.2 1.055.2.654 0 1.069-.2.427-.2.628-.613.213-.426.214-1.064V31.16h1.797v5.017q0 1.626-.93 2.527-.917.888-2.765.888m20.681-.175V31.16h1.81v8.257zm-2.451-6.743V31.16h6.712v1.514zm21.319 6.743V31.16h1.848v8.257zm20.724.175q-.904 0-1.621-.275a3.5 3.5 0 0 1-1.232-.826 3.8 3.8 0 0 1-.779-1.339q-.264-.8-.264-1.826 0-1.463.516-2.414.514-.963 1.407-1.439.905-.488 2.036-.488a4.3 4.3 0 0 1 1.596.288q.717.275 1.219.826.516.538.792 1.35.276.8.276 1.84 0 1.063-.276 1.863a3.6 3.6 0 0 1-.805 1.352q-.515.538-1.244.813a4.6 4.6 0 0 1-1.621.275m.05-1.439q.666 0 1.119-.325.453-.326.691-.938.24-.614.239-1.501 0-.927-.252-1.577-.238-.65-.703-.988-.466-.35-1.132-.35-.653 0-1.118.338-.452.324-.704.95-.239.625-.239 1.551 0 .675.139 1.214.15.525.415.888.263.363.653.55.389.188.892.188m18.873 1.264V31.16h2.363l3.758 5.842h.138l-.113-5.842h1.759v8.257h-2.136L202.83 33.3h-.138l.113 6.117zm26.398.175a6 6 0 0 1-1.47-.163 3.3 3.3 0 0 1-1.107-.463 2.4 2.4 0 0 1-.716-.8 2.8 2.8 0 0 1-.289-1.114l1.584-.513q.024.564.276.939.264.375.742.55a3.1 3.1 0 0 0 1.068.175q.565 0 .955-.137.39-.138.591-.363a.78.78 0 0 0 .201-.513.64.64 0 0 0-.252-.525q-.251-.2-.691-.338-.427-.138-.98-.263a20 20 0 0 1-1.22-.313 5.3 5.3 0 0 1-1.08-.45 2.24 2.24 0 0 1-.767-.713q-.276-.438-.276-1.1 0-.764.377-1.314.39-.564 1.131-.876t1.785-.313q1.055 0 1.796.313.755.3 1.17.863.414.55.452 1.314l-1.634.45q0-.389-.126-.675a1.26 1.26 0 0 0-.351-.476 1.5 1.5 0 0 0-.566-.3 2.6 2.6 0 0 0-.754-.1 2.6 2.6 0 0 0-.855.125 1.3 1.3 0 0 0-.54.338.76.76 0 0 0-.176.5q0 .338.276.563.29.213.754.35.478.138 1.044.263.54.112 1.093.288.566.162 1.043.438.49.263.779.725.302.45.302 1.138 0 .75-.402 1.314-.402.563-1.206.876-.792.3-1.961.3M18.779 23.643l-7.391 7.379a1.77 1.77 0 0 0 0 2.505 1.777 1.777 0 0 0 2.51 0l4.881-4.873a1.777 1.777 0 0 1 2.51 0L32.134 39.48a1.777 1.777 0 0 0 2.51 0 1.77 1.77 0 0 0 0-2.505L21.289 23.643a1.777 1.777 0 0 0-2.51 0M21.288 16.357l7.392-7.379a1.77 1.77 0 0 0 0-2.505 1.777 1.777 0 0 0-2.51 0l-4.882 4.873a1.777 1.777 0 0 1-2.51 0L7.934.52a1.777 1.777 0 0 0-2.51 0 1.77 1.77 0 0 0 0 2.505L18.78 16.357a1.777 1.777 0 0 0 2.51 0M28.702 18.747 39.548 7.92a1.77 1.77 0 0 0 0-2.505 1.777 1.777 0 0 0-2.51 0L23.683 18.747a1.77 1.77 0 0 0 0 2.506l7.39 7.379a1.777 1.777 0 0 0 2.51 0 1.77 1.77 0 0 0 0-2.506l-4.881-4.873a1.77 1.77 0 0 1 0-2.506M16.385 18.747 8.993 11.37a1.777 1.777 0 0 0-2.51 0 1.77 1.77 0 0 0 0 2.505l4.883 4.873a1.77 1.77 0 0 1 0 2.506L.52 32.08a1.77 1.77 0 0 0 0 2.506 1.777 1.777 0 0 0 2.51 0l13.355-13.333a1.77 1.77 0 0 0 0-2.506"
                  >
                  </path>
                </svg>
              </div>
            </Link>
          </div>

          {/* Desktop Navigation */}
          <nav className="hidden md:flex items-center space-x-8">
            <Link
              href="/"
              className="text-sm font-medium text-foreground/80 hover:text-foreground transition-colors">
              Home
            </Link>
            <Link
              href="/chat"
              className="text-sm font-medium text-foreground/80 hover:text-foreground transition-colors">
              Chat
            </Link>
          </nav>

          {/* Mobile menu button */}
          <div className="md:hidden">
            <button
              onClick={() => setIsMenuOpen(!isMenuOpen)}
              className="inline-flex items-center justify-center rounded-md p-2 text-foreground/80 hover:text-foreground hover:bg-accent focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary"
              aria-expanded="false">
              <span className="sr-only">Open main menu</span>
              {!isMenuOpen ? (
                <svg
                  className="block h-6 w-6"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  aria-hidden="true">
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeWidth={2}
                    d="M4 6h16M4 12h16M4 18h16"
                  />
                </svg>
              ) : (
                <svg
                  className="block h-6 w-6"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  aria-hidden="true">
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeWidth={2}
                    d="M6 18L18 6M6 6l12 12"
                  />
                </svg>
              )}
            </button>
          </div>
        </div>

        {/* Mobile menu */}
        {isMenuOpen && (
          <div className="md:hidden">
            <div className="px-2 pt-2 pb-3 space-y-1 border-t">
              <Link
                href="/"
                className="block px-3 py-2 text-base font-medium text-foreground/80 hover:text-foreground hover:bg-accent rounded-md"
                onClick={() => setIsMenuOpen(false)}>
                Home
              </Link>
              <Link
                href="/copilotkit"
                className="block px-3 py-2 text-base font-medium text-foreground/80 hover:text-foreground hover:bg-accent rounded-md"
                onClick={() => setIsMenuOpen(false)}>
                Workflows
              </Link>
            </div>
          </div>
        )}
      </div>
    </header>
  );
}
